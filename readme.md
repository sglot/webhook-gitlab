# Webhook для GitLab
Обновление кода на сервере при мердж реквесте

## Описание
Компонент подготовлен для обновлении ветки **master** при мердж реквесте в веб-интерфейсе гитлаба 
в рамках структуры "приложения" на bitrix.

## Как настроить
### Настройка в коде
1. Клонировать репозиторий в корень проекта.
    Например, в `/home/bitrix/www/`

2. Прописать в файле `./webhook-gitlab/git/pull/index.php` константу **TOKEN**.
    Вставьте туда значение **Secret Token** из настроек вебхуков в гитлабе.

### Настройка в GitLab
1. В проекте перейдите в настройки `Settings -> Webhooks`. 
В поле **URL** пропишите адрес до вашего файла, который будет запускать работу по обновлению кода.
Например, `https://your-site.ru/webhook-gitlab/git/pull/index.php`

2. В поле **Secret Token** вставьте ваш секретный токен.

На этом настройка завершена.


Обратите внимание, что гитлаб отправляет вебхуки при создании каждого мердж реквеста, 
но код будет обновляться, если этот реквест был ветку мастер и успешно смерджен.
Таковы настройки. Вы можете легко изменить их по своему желанию.

Протестируйте работу вебхуков, прежде чем использовать компонент в разработке.
Проверьте пути в компоненте, если меняли название директории (`webhook-gitlab`).


Удачи!



